#ifndef CONV_TABLE_INCLUDED
#define CONV_TABLE_INCLUDED

/* Automatically generated by gen_convert.py; do not edit. */

#include <stdint.h>
#include <avr/pgmspace.h>

#define CONV_BEGIN1 248
#define CONV_BEGIN2 2048
#define CONV_SHIFT1 3
#define CONV_SHIFT2 8
#define CONV_STEP1 (1 << CONV_SHIFT1)
#define CONV_STEP2 (1 << CONV_SHIFT2)
#define CONV_MASK1 (CONV_STEP1 - 1)
#define CONV_MASK2 (CONV_STEP2 - 1)

extern const uint16_t conv_table1_PGM[225] PROGMEM;
extern const uint16_t conv_table2_PGM[249] PROGMEM;

static inline uint16_t convert_rate_to_interval(uint16_t rate)
{
    union {
        uint32_t dw;
        uint16_t w[2];
    } x;

    if (rate < CONV_BEGIN1)
        return 0;
    if (rate < CONV_BEGIN2) {
        uint8_t index = (rate - CONV_BEGIN1) >> CONV_SHIFT1;
        x.dw = pgm_read_dword_near(conv_table1_PGM + index);
        uint16_t a = x.w[0];
        uint16_t b = x.w[1];
        return a - ((a - b) * (rate & CONV_MASK1) >> CONV_SHIFT1);
    }
    uint8_t index = (rate - CONV_BEGIN2) >> CONV_SHIFT2;
    x.dw = pgm_read_dword_near(conv_table2_PGM + index);
    uint16_t a = x.w[0];
    uint16_t b = x.w[1];
    return a - ((uint32_t)(a - b) * (rate & CONV_MASK2) >> CONV_SHIFT2);
}

#ifdef DEFINE_CONV_TABLE

const uint16_t conv_table1_PGM[225] PROGMEM = {
                                                     64516,    /* 31 */
    62500, 60606, 58823, 57142, 55555, 54054, 52631, 51282,    /* 32 */
    50000, 48780, 47619, 46511, 45454, 44444, 43478, 42553,    /* 40 */
    41666, 40816, 40000, 39215, 38461, 37735, 37037, 36363,    /* 48 */
    35714, 35087, 34482, 33898, 33333, 32786, 32258, 31746,    /* 56 */
    31250, 30769, 30303, 29850, 29411, 28985, 28571, 28169,    /* 64 */
    27777, 27397, 27027, 26666, 26315, 25974, 25641, 25316,    /* 72 */
    25000, 24691, 24390, 24096, 23809, 23529, 23255, 22988,    /* 80 */
    22727, 22471, 22222, 21978, 21739, 21505, 21276, 21052,    /* 88 */
    20833, 20618, 20408, 20202, 20000, 19801, 19607, 19417,    /* 96 */
    19230, 19047, 18867, 18691, 18518, 18348, 18181, 18018,    /* 104 */
    17857, 17699, 17543, 17391, 17241, 17094, 16949, 16806,    /* 112 */
    16666, 16528, 16393, 16260, 16129, 16000, 15873, 15748,    /* 120 */
    15625, 15503, 15384, 15267, 15151, 15037, 14925, 14814,    /* 128 */
    14705, 14598, 14492, 14388, 14285, 14184, 14084, 13986,    /* 136 */
    13888, 13793, 13698, 13605, 13513, 13422, 13333, 13245,    /* 144 */
    13157, 13071, 12987, 12903, 12820, 12738, 12658, 12578,    /* 152 */
    12500, 12422, 12345, 12269, 12195, 12121, 12048, 11976,    /* 160 */
    11904, 11834, 11764, 11695, 11627, 11560, 11494, 11428,    /* 168 */
    11363, 11299, 11235, 11173, 11111, 11049, 10989, 10928,    /* 176 */
    10869, 10810, 10752, 10695, 10638, 10582, 10526, 10471,    /* 184 */
    10416, 10362, 10309, 10256, 10204, 10152, 10101, 10050,    /* 192 */
    10000,  9950,  9900,  9852,  9803,  9756,  9708,  9661,    /* 200 */
     9615,  9569,  9523,  9478,  9433,  9389,  9345,  9302,    /* 208 */
     9259,  9216,  9174,  9132,  9090,  9049,  9009,  8968,    /* 216 */
     8928,  8888,  8849,  8810,  8771,  8733,  8695,  8658,    /* 224 */
     8620,  8583,  8547,  8510,  8474,  8438,  8403,  8368,    /* 232 */
     8333,  8298,  8264,  8230,  8196,  8163,  8130,  8097,    /* 240 */
     8064,  8032,  8000,  7968,  7936,  7905,  7874,  7843,    /* 248 */
};

const uint16_t conv_table2_PGM[249] PROGMEM = {
     7812,  6944,  6250,  5681,  5208,  4807,  4464,  4166,    /* 8 */
     3906,  3676,  3472,  3289,  3125,  2976,  2840,  2717,    /* 16 */
     2604,  2500,  2403,  2314,  2232,  2155,  2083,  2016,    /* 24 */
     1953,  1893,  1838,  1785,  1736,  1689,  1644,  1602,    /* 32 */
     1562,  1524,  1488,  1453,  1420,  1388,  1358,  1329,    /* 40 */
     1302,  1275,  1250,  1225,  1201,  1179,  1157,  1136,    /* 48 */
     1116,  1096,  1077,  1059,  1041,  1024,  1008,   992,    /* 56 */
      976,   961,   946,   932,   919,   905,   892,   880,    /* 64 */
      868,   856,   844,   833,   822,   811,   801,   791,    /* 72 */
      781,   771,   762,   753,   744,   735,   726,   718,    /* 80 */
      710,   702,   694,   686,   679,   672,   664,   657,    /* 88 */
      651,   644,   637,   631,   625,   618,   612,   606,    /* 96 */
      600,   595,   589,   584,   578,   573,   568,   563,    /* 104 */
      558,   553,   548,   543,   538,   534,   529,   525,    /* 112 */
      520,   516,   512,   508,   504,   500,   496,   492,    /* 120 */
      488,   484,   480,   477,   473,   469,   466,   462,    /* 128 */
      459,   456,   452,   449,   446,   443,   440,   437,    /* 136 */
      434,   431,   428,   425,   422,   419,   416,   413,    /* 144 */
      411,   408,   405,   403,   400,   398,   395,   393,    /* 152 */
      390,   388,   385,   383,   381,   378,   376,   374,    /* 160 */
      372,   369,   367,   365,   363,   361,   359,   357,    /* 168 */
      355,   353,   351,   349,   347,   345,   343,   341,    /* 176 */
      339,   337,   336,   334,   332,   330,   328,   327,    /* 184 */
      325,   323,   322,   320,   318,   317,   315,   314,    /* 192 */
      312,   310,   309,   307,   306,   304,   303,   301,    /* 200 */
      300,   299,   297,   296,   294,   293,   292,   290,    /* 208 */
      289,   288,   286,   285,   284,   282,   281,   280,    /* 216 */
      279,   277,   276,   275,   274,   272,   271,   270,    /* 224 */
      269,   268,   267,   265,   264,   263,   262,   261,    /* 232 */
      260,   259,   258,   257,   256,   255,   254,   253,    /* 240 */
      252,   251,   250,   249,   248,   247,   246,   245,    /* 248 */
      244,                                                     /* 256 */
};

#endif /* DEFINE_CONV_TABLE */

#endif /* !CONV_TABLE_INCLUDED */
